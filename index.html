
<!DOCTYPE HTML>
<html>
<head>
	<title>game of autism</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #000000;
		}
		#fps {
			color:white;
			position:absolute;
		}
		canvas {
		
		width:100%;
		height:100%;}
		
		
		#revs {
		position:absolute;
		  width: 80%;
	top: 10px;
			
  

		}
		
input[type=range].vertical
{
    writing-mode: bt-lr; /* IE */
    -webkit-appearance: slider-vertical; /* WebKit */
 
}
		
	</style>
	<script src="pixi.dev.js"></script>
	
	<script>
	//STATS
	// stats.js - http://github.com/mrdoob/stats.js
var Stats=function(){var l=Date.now(),m=l,g=0,n=Infinity,o=0,h=0,p=Infinity,q=0,r=0,s=0,f=document.createElement("div");f.id="stats";f.addEventListener("mousedown",function(b){b.preventDefault();t(++s%2)},!1);f.style.cssText="width:80px;opacity:0.9;cursor:pointer";var a=document.createElement("div");a.id="fps";a.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";f.appendChild(a);var i=document.createElement("div");i.id="fpsText";i.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
i.innerHTML="FPS";a.appendChild(i);var c=document.createElement("div");c.id="fpsGraph";c.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(a.appendChild(c);74>c.children.length;){var j=document.createElement("span");j.style.cssText="width:1px;height:30px;float:left;background-color:#113";c.appendChild(j)}var d=document.createElement("div");d.id="ms";d.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";f.appendChild(d);var k=document.createElement("div");
k.id="msText";k.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";k.innerHTML="MS";d.appendChild(k);var e=document.createElement("div");e.id="msGraph";e.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(d.appendChild(e);74>e.children.length;)j=document.createElement("span"),j.style.cssText="width:1px;height:30px;float:left;background-color:#131",e.appendChild(j);var t=function(b){s=b;switch(s){case 0:a.style.display=
"block";d.style.display="none";break;case 1:a.style.display="none",d.style.display="block"}};return{REVISION:11,domElement:f,setMode:t,begin:function(){l=Date.now()},end:function(){var b=Date.now();g=b-l;n=Math.min(n,g);o=Math.max(o,g);k.textContent=g+" MS ("+n+"-"+o+")";var a=Math.min(30,30-30*(g/200));e.appendChild(e.firstChild).style.height=a+"px";r++;b>m+1E3&&(h=Math.round(1E3*r/(b-m)),p=Math.min(p,h),q=Math.max(q,h),i.textContent=h+" FPS ("+p+"-"+q+")",a=Math.min(30,30-30*(h/100)),c.appendChild(c.firstChild).style.height=
a+"px",m=b,r=0);return b},update:function(){l=this.end()}}};
	</script>
	
	
</head>
<body>
	<div id="fps">
	</div>
	<!-- <input id="revs" type="range" min="0" max="1000" step="1" /> -->
	
	<script>
	//paths to pics (data strings here)
//	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
	const ES = 'data:image/png;base64,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';
	const PONY = 'data:image/png;base64,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';
	//const FEDORA = 'data:image/png;base64,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';
	//const FEDORA = 'data:image/png;base64,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';
	const FEDORA = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAtCAYAAADcMyneAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gscDDQdWMlogwAACTpJREFUWMPNmXlwVdUdxz/n3nffnrdlI2ThZQhgFBRBlMiojTDjAGNx2jRjdaAtrY4wUmcc7T9OxwXHTmkrdqa2pRU7tsB0oApGotW64gIFpBGEVEAJJJKEJY+85K13Of3j3QcPSCQsYn8zZ+bd5Zzzvb/l+/v9zoP/c1Ev8XoBwAlkL9WC4hKs4QceBmYCQUACx4EWYPk3bYHZgGmDOjk0TZOBQEAKIfqAad8UuIahwAGytLRU3nnnnTIajUrAAm79JgCuGQocID0ejywtLZVutzt/70Og+HKCKwO2DAdwiGHY7nDeolwgwCAQdDgcVFZWUlZWdvKBx+Nh1KhR3HjjjYRCoUK2aPgaWGNYuRLY/8QTT8j169fLu+66SwIyFArJtWvXys7OTtnS0iKnTJlSqMUWwHO5NGhNnz7d8vl87N69m/nz5+N0Olm0aBENDQ0sWbKESZMm0dTUdKbWz3s/xwUCNL1er9nS0kJ1dTWKkETHVFFWGmHjxhY2bNhAXV0dM2fOLJwTtzV5WTSY/vCjj9JNTc0c3LGK5vG/4bNVB2mqfJir/cu5bgJMmTiKd97ddNEavNAEVApsXvfL6TL+tpBymyJlW4U0/o2UbUVSttVI+dm1cv7sokIfPGGnwsthYpmaMZbUDRO2UBQEpAbGcVQtCOoYjnd/zom+Q9RXnxX5VwBbL4eJkzsPa8lt2wMM9oOhZ8nqOnrWRXvbLmJ9CWrGhNi6vxZFUZk1axa1tbUIIRZdLh8Ug1lEV/BnvPz2RA59DieOSTq/OILb7cIq+QmdRa0suH85lmXS0dFBNBpFVdUfAhWXo5qZCLy2ffvHVT1fdnD4kxcIa114wmOpnryQuok34/V5AWhubmbdunVomoau6wD/vNCsMlJxAysbGxtlIpGQ/f39srX1VfnKxla5d98+aVmWLJSuri4phCgMljSw4OsE+GAkEpFbtmw5CaK/v1/GYjE5lKTTadnc3Hxmbt4PjPs6wDUDsrm5WRqGIUcqq1atGqqAaBlJbj4fmqkGntU0jWg0SiqVwu/3Y1kWPT09eDweQqEQQgiSySSdnZ309vZiGAZ1dXXU19fT3t5euN7twBLgmUsVxY8KIUq8Xi9Tp05lYGAAKSWKohCJRPD7/QiRizlN0/D5fGiaRiwWo6+vj4aGBiKRCCUlJSjKyW2XA7WXwrSTfD5fJyAfeOABeT6SzWblrl27ZGtrqwwEAjIcDstgMFho6k0XndeEEPeXlpbKiooKmclk5PmKZVkyk8nIhQsXykgkImtqaqTH48kDTAHfvqiuLRAIvO9wOOTq1avlxcjmzZslIP1+v6yqqpKKouRBvngxAK9xuVyysrJySCqxLEuapjlikHnTVlZWSlVV89dfAFddUJAoivKMEIIZM2bgdrvPen7s2DESicSIv3bMmDEAxGIxLMvK364djhfPBXCeoijfCoVCTJs2DafTedYLR48ePRm9I2pmgsFcOnK7z5w3fig85wK4zDAkhmlRVlZWSA+nyppkEk3TRl6KmyZOpxOn01moQYDQiAFKuzD3uRm4e7ZJTUkc1TF0v2MYBqo68mYtq1uUl5djGAbl5eWMHj06/6jLpWGeM5M8/wMQAtJrccYCFIeCQQ59OciKN1fwvaY7cDpP15bb7SaTyeBwDJ+UpKVjHV2Nmt5OiecAW/ZbKMJEURSqq6upqggfScZj2/oSw/QsGx48+96xV/mttaPKlJ9cJ+Wn4+Xmlcjrp46XPT29p0VlLBaTqVTqq8m6f4/M/udmKfdMlvfOc56Wk8uLHbL7jQopd9Y80v3S2RZ1rPoR3PF07uKjZVR5fNRIySy3V7lHKGEFJJh+pt9Uwvz2vYyfMJE1q//C3Llzc45zqjkfVmKxBK7BbnzpDop0Ha8GaR1Gh+Cp+0xG1QhkIlVUXoNyaDVWzd0F54MvteV+dKzl4bp6ni4u457iMuZ4i8KaUCN2TauA7uT6a2J8vHOQnz+1HsvM0NjYOIKgsNj58WbU/hcJBweojsBV5XDLVbC4CebNLQGzCMs0/Z27B/9cM3+uNa94HyteO90HtVCYW12+mnqhhgrcM08DEoQPrApWPNLJeztSLF26FCEEjz/++LnyJJrDyWAcRCVccTVU14JQwOf3gBoFJKozOLl6kvYPIVrvAIi/5SMwM4Gycj4AemKQPmkl7QNSbYhuwAJlFJFQgGU/zXULe/fuHUkip7fnMMePxpESFNVNUSSAP+hFOEafTimO8nnGtnF7sluq6gMzc+Sv/PhvdieeIiutxDmafwvhqOY7jfD3Py5g6ZNPnhPgpvc38atfPIYwMzmrOMaBMg7U8aCEztjPQnUG6x2u0Aux14kAKNHK3KNwCV7FMZLm30kw6Kdx7EbKI65h3zIMg4ceeog5c+aSjPdSWQ5CCQGu4Y/HhQAsDH3wg/Bt9AE4Or7E8eD3qfD4qBayH2QAhMcGKoYwtQCclAWP86cnb2BU43Ncf921KIpCPB6nra2NjRs3smbNGnRdRwBV9RAIAMpQGSfHOJZpmgPx/gPt/+1d3HBf+l8A7X/NRYLa0Y0Vj3PMyKRQ1b2oDg1Vc6E6XKB4cgGCKwda6oBOJgtXRg5z0+1zzlFsQFkALAnIlF3+qSBMkCnSg0l6elIdOz6NP//dR+UKIFEWVrQjMUuvX5ADaL30LomKEI9dU8ObQRc3B7z6lIBPrw2GBgkXQ7hUxePTQFFBGmRTGbq7IJM+iWMASNi7DwJJW9XFQFQ3UE8cA7e/H19RGiFUUgmDwwd12vZY659t4fcf7OWATR2OIzErU5jqDCD77AY6BbwsBG8BHr+LojmTmDytjlkTombj6CrTEwrn3CSZgM4D8OImXgF+B3QV+ER+XS/gNi08LoXbDx3k3mRa4vKksUzo7YY3tvLYr1+jxe6VdSBjD+PMkwXFtqHHHm77Os+T3sW3cMu1Y7kt4KPKMDE/+Zznlr3OBkVgWJKsvUEenMee7wa0aITA4kbuKY8wWXWg6jr9W/ex8g/v8Y4Q6FKStrWesgHK4Y4+VJsEXQWE6LA/wASM2iChtI7eneSEvVDWHnmAmj03v0Z+vlHqIVDix9F+lJg9RxZoTbf3GNHZjDiV404OcYqxyf//YRaE4lClnGJ/tDg9LZ02X34V+f4PeG7v/ICrbIQAAAAASUVORK5CYII=';
	const CHAN = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABOtJREFUeNrkV81rXUUUPzP3vveSvEBS41P8bohSqC6iKbiooLhxpWSrO8E/oCtFLbhyIbQYUEFx4cY/oN246qJ140KFSAWtoJuAUoWatMnLzf2Y4zlnPu5M733ZduENk5k3M3fOb875nd/MVYgI9/LRcI+f3DeUUnD29c+XAHELATepaxnEO2gr8G3nMT8Wt/28njF6dundS1Sf++Hyu3t+HeUbL7zxBRu/OjfK19ceX4H5uYGDRgsZEMOGi0FojAl1w3Vj2uJ+11Eft+u6guJwSms127TaS99ffm8v8QDvnI2f3TgJw0FOHrFe8SDIFpXUYF3bxatQN9LHNZeS+6sGFLWV1lQyONzfWzdotmjRNxMOsNuffOJ+GA1zyLSCPNNSBrmGYZ5Rf0bAbOG+nPoyqjOak+VK3uGiuTjwqt0dtVE2lQ9GvNnNDgc45gvzA3lZu4V4QVnIrWQrcj8Z1RQXHjdU9nYLuHNQgvEh4BA1LkQNc8MIAA6jW2u5C4AGV5YXxIx3f1ssBxiBCkAA9qclXP/tJry48RCcOb0qbtaKwbO72RNa+j747FsYZExOAkJ9cepHHkBH1qRHgPF8Jp0QzxGRF/n1j3/g/bc2YO2xE7C4uAij0SiA7iyEPoNCVqQAEP08biiphf3QZgC70wO5vV/A+qkVMT6ZTGA4HMrOE7sC1rgUNeIBxHSjOoYpRjnKDq0YNT6l2phy/fetA3L7gzAej8V4nucCIC5ZlgVQ6D0gNmaEgA0qgwl77Tso5AppaKx3xgtDcTsb8s83127AR19eExJ7o8p5wG7QzAqB27WxTMXGsg1NLEAOhMt5TzjLbgv706+/gwfum6c5pAVVTfOoVFYfbBjSEMRpCDt/3ZZdLczllOs25zExjkGIGNQzT03EcBz7o7KC8bwWoNZjHEIG0EhtTNPvAUZWElJD5JoeanEh/3lNkPSjf00AgTbd7mI8j+1PC1HAsqrEU6apBUwIw6w0ZLScpyI2xqYT1hhemhaVFH6/OKoC2RIABOywMC5btEWtOaRHgYT9HACb64SX5iiJb5vCFsDBtILNl9dg9dElEZk+D1x4+xWrmk6Uft+5BR9/dTXEX+q+45gHWUpZAwyqoOWWMxjIeGp1As89/YgwnwunX/w8v37S5b5V059u3KTdV60QBS/0hKAmI5oV12WCkgRKj2I2GOd97y0n6t/+5U8KS+nibuxmZimhEMUJvkpUFJ0WGKvxPbGf9fz4845zu1dBMysNLbNlVMXHgxMjY+t3Ll6x4aL2J+dfhWdPP5wYpFsVXzoC0Zr6KHE/ziIhuB3GZxJiq4TGvUjyIGBY0Mqy7OyYjVdHdxLSJQQ8VoqN3ZlHKmHBNg3lRZfPTFS5HdDvNBx4l3GM2O+kuC8E6ESkleR254jdRZU763ufaL6cgNGF9tgQeNkVowaT3UNQMXusgrZa0Tn7/ZEe+I7RMWw6aZgcx1VVth6IXR8Zx6hf9QhRSLfIYELA4JHuh8kun2DGhjmQL4lh5AkvNP0RwIhHvQTc7QDgj4aymLpDIyZQSqSwM4jvDcdxoL0D2FrGL/V54Bx/NBQH/9JJVpAsV0nsQhaEuM76pox3a8Lc6Itqm22FL7L4MnHmtQ+XaOqWu7cvB8YiBOPuppqy2YPzY1E7cbv7NLt+5UL30+x/+3X8nwADAGdc48ttRnltAAAAAElFTkSuQmCC';
	
	//renderer size
	const WIDTH = 700;
	const HEIGHT = 500;
	
	var generationCounter = 0;
	
	//stats initialization
	window.stats = new Stats();
	document.body.appendChild( stats.domElement );
	stats.domElement.style.position = "absolute";
	stats.domElement.style.top = "0px";

	//create 2 global matrices for game of life!
	//first one indicates the type of each element, second one has their handles
	/*
	numbers 0-4 indicate which type each element is:
	0 - ES
	1 - PONY
	2 - FEDORA
	3 - CHAN4
	elements are like this: 
	0|1
	2|3
	*/
	var globalTypeArray = new Array();
	for(var i = 0;i < HEIGHT/20;i++){
		globalTypeArray.push(new Array());
		for(var j = 0;j < WIDTH/20;j++){
			if(j < WIDTH/40)
				if(i < HEIGHT/40)
					globalTypeArray[i].push(0);
				else
					globalTypeArray[i].push(2);
			else
				if(i < HEIGHT/40)
					globalTypeArray[i].push(1);
				else
					globalTypeArray[i].push(3);
		}
	}
	var globalHandleArray = new Array();
	for(var i = 0;i < HEIGHT/20;i++){
		globalHandleArray.push(new Array());
		for(var j = 0;j < WIDTH/20;j++){
			globalHandleArray[i].push(null);
		}
	}
//console.log("globalTYPEArray initialized: "+globalTypeArray.length+","+globalTypeArray[0].length);
//console.log("globalHANDLEArray initialized: "+globalHandleArray.length+","+globalHandleArray[0].length);

	// create an new instance of a pixi stage
	var stage = new PIXI.Stage(0x555555);

	// create a renderer instance
	//var renderer = new PIXI.WebGLRenderer(400, 300);
	var renderer = new PIXI.autoDetectRenderer(WIDTH, HEIGHT);

	// add the renderer view element to the DOM
	document.body.appendChild(renderer.view);

	//start animation loop
	requestAnimFrame( animate );


	
	//set new textures
	//console.log(PIXI.TextureCache);
	for(var i = 0; i < globalTypeArray.length;i++){
		for(var j = 0;j < globalTypeArray[i].length;j++){
			switch(globalTypeArray[i][j]){
				case 0:
					globalHandleArray[i][j] = stage.getChildIndex(addTextureToPoint(20*j,20*i,ES));
					break;
				case 1:
					globalHandleArray[i][j] = stage.getChildIndex(addTextureToPoint(20*j,20*i,FEDORA));
					break;
				case 2:
					globalHandleArray[i][j]= stage.getChildIndex(addTextureToPoint(20*j,20*i,CHAN));
					break;
				case 3:
					globalHandleArray[i][j] = stage.getChildIndex(addTextureToPoint(20*j,20*i,PONY));
					break;
				default: 
					throw new Error("error with globalArray:"+globalTypeArray[i][j] +","+ i +","+ j);
					break;
			}
		}
	}
	
	
////console.log(globalHandleArray);
////console.log(getRandomElem());
	var calculateFrame = false;
	var drawFrame = true;
	function animate() {
		//if(drawFrame)
			//console.log("drawFrame");
		//if(calculateFrame)
			//console.log("calcFrame");
		stats.begin();
		////console.log(globalHandleArray[0][0]);
		////console.log(stage);
		//alert(stage.getChildIndex(globalHandleArray[0][0]));
		////console.log(generationCounter);
		////console.log(globalHandleArray);
		
		
		if(calculateFrame){
	//console.log("going to calculate..");
			//make the calculations base on old array, so it won't evolve in the same calc turn
			var newGlobalTypeArray = [];
			
			
			//get the most surrounding elem then make 10% chance to change to that 
			for(var i = 0; i < globalTypeArray.length;i++){
				newGlobalTypeArray.push(new Array());
				for(var j = 0;j < globalTypeArray[i].length;j++){
					var surroundingType = calcElemType(j,i);
					
					if(surroundingType !== -1 && Math.floor((Math.random() * 6)) === 0){
	//console.log("change happened to type "+surroundingType);
						newGlobalTypeArray[i][j] = surroundingType;
					}
					else
						newGlobalTypeArray[i][j] = globalTypeArray[i][j];	
				}
			}
			//console.log("calculate compelete!");
			globalTypeArray = newGlobalTypeArray;
			drawFrame = true;
			calculateFrame = false;
		}
		else if(drawFrame){
			//console.log("going to draw..");
			
			//remove old sprites
			stage.removeChildren(0,WIDTH*HEIGHT/400);
			
			//hello new sprites
			for(var i = 0; i < globalTypeArray.length;i++){
				for(var j = 0;j < globalTypeArray[i].length;j++){
					switch(globalTypeArray[i][j]){
						case 0:
							globalHandleArray[i][j] = addTextureToPoint(20*j,20*i,ES);
							break;
						case 1:
							globalHandleArray[i][j] = addTextureToPoint(20*j,20*i,FEDORA);
							break;
						case 2:
							globalHandleArray[i][j]= addTextureToPoint(20*j,20*i,PONY);
							break;
						case 3:
							globalHandleArray[i][j] = addTextureToPoint(20*j,20*i,CHAN);
							break;
						default: 
							
							throw new Error("error with globalArray:"+globalTypeArray[i][j] +","+ i +","+ j);
							break;
					}
				}
			}
			 //console.log("drawing complete!");
			 renderer.render(stage);  
			 drawFrame = false;
			 calculateFrame = true;
		}
		
	
	
	    ////console.log(beta);
	//	if(beta){
	//		plane.rotation = -beta * Math.PI/90/1.7;

	//	}
	//   	rotorRotation += document.getElementById("revs").value *Math.PI/2000;
	 //  	rotor.rotation = plane.rotation + rotorRotation;
	    
	    // //console.log(document.getElementById("revs").value *Math.PI/2000);
	    ////console.log(plane.rotation);
	    // render the stage
		generationCounter++;
		requestAnimFrame( animate );
	   
		stats.end();
	}
	
	/**
	* 
	*takes in filename (atleast png/base64 png)
	*adds sprite to point, hope you made sure that it is in the view
	*returns handle to sprite
	*/
	function addTextureToPoint(x,y,filename){
		// create a texture from an image path
		var texture = PIXI.Texture.fromImage(filename);
		// create a new Sprite using the texture
		var sprite = new PIXI.Sprite(texture);

		// center the sprites anchor point
		sprite.anchor.x = 0.5;
		sprite.anchor.y = 0.5;
	////console.log(renderer);
		// move the sprite t the requested point
		sprite.position.x = x;
		sprite.position.y = y;

		return stage.addChild(sprite);
		
	}
	/**
	* 
	*takes in filename (atleast png)
	*adds sprite to center of scene
	*returns handle to sprite
	*/
	function addTextureToCenter(filename){
		// create a texture from an image path
		var texture = PIXI.Texture.fromImage(filename);
		// create a new Sprite using the texture
		var sprite = new PIXI.Sprite(texture);

		// center the sprites anchor point
		sprite.anchor.x = 0.5;
		sprite.anchor.y = 0.5;
	//console.log(renderer);
		// move the sprite t the center of the screen
		sprite.position.x = renderer.width/2;
		sprite.position.y = renderer.height/2;
 
		
		return stage.addChild(sprite);
		
	}
	/**
	* return the elem type that wins the point
	* if none surrounding it, return -1
	* 
	*/
	function calcElemType(x,y){
	
		var checkArray = checkUpperElems(x,y).concat(checkSideElems(x,y)).concat(checkLowerElems(x,y));
	//console.log(checkArray);
		var checkArrayFiltered = checkArray.filter(function(elem){return elem !== globalTypeArray[y][x]});
		//no foreign elements nearby
		if(checkArrayFiltered.length === 0)
			return -1;
		//console.log(checkArrayFiltered);
		
		//change to obj for easier counting (thank you ECMA5 for not supporting functional ways)
		var countObj = {};
		for(var i = 0; i < checkArray.length;i++) countObj[checkArray[i]] = countObj[checkArray[i]] + 1 || 1;
		//console.log(countObj);
		var countArray = [];
		for(var i in countObj){
			if(countObj.hasOwnProperty(i)){
				 countArray.push({type:i,amount:countObj[i]});
			}
		}
		
		
		//sort to get the most amount
		//countArray.sort(function(a,b){return b.amount - a.amount});
		
		
		
		//lets randomize the winning element, so that the elementtype with the most blocks around gets best chance 
		var contestantAmount = countArray.reduce(function(a,b){return a+b.amount},0);
		console.log(contestantAmount);
		var randomVal = Math.floor(Math.random()*contestantAmount)+1;
		for(var i = 0; i < countArray.length;i++){
			randomVal = randomVal - countArray[i].amount;
			if(randomVal <= 0){
				return parseInt(countArray[i].type);
			}
				
		}
		
		
		//	return parseInt(countArray[0].type);
		
		// there was no surrounding foreign elements
		return -1;
		
		
		
		function checkUpperElems(x,y){
			var returnable = [];
			if(y === 0){
				return returnable;
			}
			else{
				if(x === 0){
					returnable.push(globalTypeArray[y-1][x]);
					returnable.push(globalTypeArray[y-1][x+1]);					
				}
				else if(x === globalTypeArray[0].length - 1){
					returnable.push(globalTypeArray[y-1][x-1]);
					returnable.push(globalTypeArray[y-1][x]);
				}
				else{
					returnable.push(globalTypeArray[y-1][x-1]);
					returnable.push(globalTypeArray[y-1][x]);
					returnable.push(globalTypeArray[y-1][x+1]);
				}
			}
				return returnable;
		}
		function checkSideElems(x,y){
			var returnable = [];			
			if(x === 0){
				returnable.push(globalTypeArray[y][x+1]);				
			}
			else if(x === globalTypeArray[0].length - 1){
				returnable.push(globalTypeArray[y][x-1]);
			}
			else{
				returnable.push(globalTypeArray[y][x-1]);
				returnable.push(globalTypeArray[y][x+1]);
			}
		
			return returnable;
		}
		function checkLowerElems(x,y){
			var returnable = [];
			if(y === globalTypeArray.length - 1){
				return returnable;
			}
			else{
				if(x === 0){
					returnable.push(globalTypeArray[y+1][x]);
					returnable.push(globalTypeArray[y+1][x+1]);					
				}
				else if(x === globalTypeArray[0].length - 1){
					returnable.push(globalTypeArray[y+1][x-1]);
					returnable.push(globalTypeArray[y+1][x]);
				}
				else{
					returnable.push(globalTypeArray[y+1][x-1]);
					returnable.push(globalTypeArray[y+1][x]);
					returnable.push(globalTypeArray[y+1][x+1]);
				}
			}
				return returnable;
		}
	}
	
	function getRandomElem(){
		var array = [ES,PONY,FEDORA,CHAN];
		return array[Math.floor((Math.random() * 4))];
	}
	
	</script>
	<script>
	/*
	{
		var gamma,alpha,beta;
		gamma = alpha = beta = 0;
		var lastUpdate = 0;
		// Listen for the deviceorientation event and handle the raw data
		window.addEventListener('deviceorientation', function(eventData) {
			var time = new Date();
			if (time - lastUpdate <= 70)
				return;
			else
				lastUpdate = time;
			// gamma is the left-to-right tilt in degrees, where right is positive
			//gamma = eventData.gamma;

			// beta is the front-to-back tilt in degrees, where front is positive
			beta = eventData.beta;
			
			//TODO: REMOVE
			//$('#name').html(beta*5+"");
			
			//beta is 0-90 when tilting to right
			//beta is -90-0 when tilting to left
			

		// alpha is the compass direction the device is facing in degrees
			//alpha = eventData.alpha
			
			//value passed to rotateWheel must be positive to prevent graphical bugs
			
		
		}, true);
	}
	*/


	</script>
	</body>
</html>
